{% extends 'base.html' %}

{% block body %}

<div class="container justify-content-center d-flex mt-2">
    <div class="card p-4">
        <form method="POST" id="formBusca">
            {{ form.csrf_token }}
            <div class="d-flex">
                <legend>Buscar Pedidos de Processamento</legend>
                {% if socnet %}
                    <img src="{{ url_for('static', filename='images/logo_socnet.png') }}" alt="Icone SOCNET" height="25px" width="100px">
                {% else %}
                    <img src="{{ url_for('static', filename='images/grs/logo_grs.png') }}" alt="Icone GRS" height="30px" width="70px">
                {% endif %}
            </div>
            <fieldset>
                <div class="form-group">
                    {{ form.cod_empresa_principal.label(class="form-control-label") }}
                    {% if form.cod_empresa_principal.errors %}
                    {{ form.cod_empresa_principal(class="form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for erro in form.cod_empresa_principal.errors %}
                        {{ erro }}
                        {% endfor %}
                    </div>
                    {% else %}
                    {{ form.cod_empresa_principal(class="form-control") }}
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.id_empresa.label(class="form-control-label") }}
                    {% if form.id_empresa.errors %}
                    {{ form.id_empresa(class="form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for erro in form.id_empresa.errors %}
                        {{ erro }}
                        {% endfor %}
                    </div>
                    {% else %}
                    {{ form.id_empresa(class="form-control") }}
                    {% endif %}
                </div>

                <div class="d-flex justify-content-between">
                    <!-- INICIO -->
                    <div class="form-group w-49">
                        {{ form.data_inicio.label(class="form-control-label") }}
                        {% if form.data_inicio.errors %}
                        {{ form.data_inicio(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for erro in form.data_inicio.errors %}
                            {{ erro }}
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.data_inicio(class="form-control") }}
                        {% endif %}
                    </div>
                    <!-- FIM -->
                    <div class="form-group w-49">
                        {{ form.data_fim.label(class="form-control-label") }}
                        {% if form.data_fim.errors %}
                        {{ form.data_fim(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for erro in form.data_fim.errors %}
                            {{ erro }}
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.data_fim(class="form-control") }}
                        {% endif %}
                    </div>
                </div>

                <div class="form-group">
                    {{ form.cod_solicitacao.label(class="form-control-label") }}
                    {% if form.cod_solicitacao.errors %}
                    {{ form.cod_solicitacao(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                        {% for erro in form.cod_solicitacao.errors %}
                            {{ erro }}
                        {% endfor %}
                        </div>
                    {% else %}
                    {{ form.cod_solicitacao(class="form-control") }}
                    {% endif %}
                </div>

                <!-- utilizado, enviado -->
                <div class="d-flex justify-content-between">
                    <div class="form-group w-49">
                        {{ form.resultado_importado.label(class="form-control-label") }}
                        {% if form.resultado_importado.errors %}
                        {{ form.resultado_importado(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for erro in form.resultado_importado.errors %}
                            {{ erro }}
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.resultado_importado(class="form-control") }}
                        {% endif %}
                    </div>

                    <div class="form-group w-49">
                        {{ form.relatorio_enviado.label(class="form-control-label") }}
                        {% if form.relatorio_enviado.errors %}
                        {{ form.relatorio_enviado(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for erro in form.relatorio_enviado.errors %}
                            {{ erro }}
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.relatorio_enviado(class="form-control") }}
                        {% endif %}
                    </div>
                </div>
                <!-- OBS -->
                <div class="form-group">
                    {{ form.obs.label(class="form-control-label") }}
                    {% if form.obs.errors %}
                    {{ form.obs(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                        {% for erro in form.obs.errors %}
                            {{ erro }}
                        {% endfor %}
                        </div>
                    {% else %}
                    {{ form.obs(class="form-control") }}
                    {% endif %}
                </div>

            </fieldset>
            <!-- BOTOES -->
            <div class="d-flex mt-3 justify-content-between">
                <button type="submit" class="btn btn-primary text-nowrap" style="width: fit-content;" id="botao_buscar" name="botao_buscar" type="submit" value="Buscar">
                    <span class="material-icons align-middle">manage_search</span> Buscar
                </button>
                <button type="button" class="btn btn-secondary text-nowrap" style="width: fit-content;" id="botao_limpar" onclick="limpar()" value="Limpar">
                    <span class="material-icons align-middle">close</span> Limpar
                </button>
                <button type="submit" class="btn btn-success text-nowrap" style="width: fit-content;" id="botao_csv" name="botao_csv" type="submit" value="Criar relatório">
                    <span class="material-icons align-middle">download</span> Gerar relatório
                </button>
            </div>
        </form>
        <script>
            function limpar() {
              document.getElementById("formBusca").reset();
              carregarOpcoesEmpresa('cod_empresa_principal', 'id_empresa')
            }
        </script>
    </div>
</div>

{% endblock %}